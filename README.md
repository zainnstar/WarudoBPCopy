# Warudo Blueprint Copy Tool

Warudo シーンファイル間でブループリント（BP）をコピーするための GUI ツールです。

## 機能

- Warudo シーンファイル（JSON）の読み込み
- ブループリント一覧の表示（ID、名前、ノード数、接続数）
- ブループリントの詳細表示
- ブループリントのコピー・移動
- **元の ID を保持してコピー**（グローバル変数参照を維持）
- 重複名の自動リネーム
- 既存ブループリントの置換
- 新規シーンファイルの作成
- ブループリントの JSON 出力（クリップボード）
- ブループリント ID のクリップボードコピー

## 使用方法

### 1. アプリケーションの起動

```bash
python main.py
```

### 2. シーンファイルの読み込み

1. 「Load Source Scene」ボタンをクリックして、コピー元のシーンファイルを選択
2. 「Load Target Scene」ボタンをクリックして、コピー先のシーンファイルを選択

### 3. ブループリントのコピー

1. 左側（Source Scene）でコピーしたいブループリントを選択
2. 中央のコピーオプションを設定：
   - **Copy/Move**: コピーまたは移動を選択
   - **Replace if exists**: 同名のブループリントが存在する場合に置換
   - **Auto-rename duplicates**: 重複名を自動でリネーム
   - **Keep original ID**: 元の ID を保持（グローバル変数参照を維持）
3. 「Copy →」ボタンをクリックしてコピー実行

### 4. その他の機能

- **右クリックメニュー**: ブループリントを右クリックで詳細表示、リネーム、JSON/ID 出力
- **ダブルクリック**: ブループリントの詳細を表示
- **Refresh**: 両シーンの表示を更新
- **Create New Scene**: 新しい空のシーンファイルを作成

## 重要な機能：元の ID を保持

「Keep original ID」オプションを有効にすると、ブループリントの ID が元のまま保持されます。これにより：

- 他のブループリントからのグローバル変数参照が維持される
- カメラコントローラーなどの連携機能が正常に動作する
- 同じ ID のブループリントが既に存在する場合は警告が表示される

**注意**: 同じ ID のブループリントが既に存在する場合、「Replace if exists」オプションを有効にしない限りコピーは失敗します。

## ファイル構成

```
WarudoBPCopy/
├── main.py                     # メインアプリケーション
├── README.md                   # このファイル
├── requirements.txt            # 必要なパッケージ
└── src/
    ├── __init__.py
    ├── gui/
    │   ├── __init__.py
    │   ├── main_window.py      # メインウィンドウ
    │   └── blueprint_list_frame.py  # ブループリントリスト表示
    ├── models/
    │   ├── __init__.py
    │   └── blueprint_data.py   # ブループリントデータ管理
    └── utils/
        ├── __init__.py
        └── json_handler.py     # JSON処理
```

## 必要な環境

- Python 3.7 以上
- tkinter（通常、Python に標準で含まれています）

## 注意事項

- シーンファイルのバックアップを作成してから使用することを推奨します
- 大きなシーンファイルの場合、読み込みに時間がかかる場合があります
- Warudo 0.13.1 形式のシーンファイルに対応しています

## トラブルシューティング

### シーンファイルが読み込めない場合

- ファイルが有効な JSON 形式であることを確認してください
- ファイルが Warudo シーンファイル形式であることを確認してください
- ファイルの読み書き権限があることを確認してください

### ブループリントがコピーできない場合

- 両方のシーンファイルが正常に読み込まれていることを確認してください
- コピー先のシーンファイルに書き込み権限があることを確認してください
- 同名のブループリントが存在する場合は、置換オプションを有効にしてください

## ライセンス

このソフトウェアは個人使用および商用利用が可能です。
